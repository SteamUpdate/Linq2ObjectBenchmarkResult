# `Count(q => q...)` [Optimized]

## Code
```csharp
public int TestSet()
{
    var count = 0;
    foreach (var item in set)
    {
        if (item.GetType() == typeof(Entity))
        {
            count++;
        }
    }
    return count;
}
```

## todo проверить Framework с HashedSet

## Framework
|    Method |    N |         Mean |     Error |    StdDev |       Median |          Min |          Max | Gen 0 | Gen 1 | Gen 2 | Allocated |
|---------- |----- |-------------:|----------:|----------:|-------------:|-------------:|-------------:|------------:|------------:|------------:|--------------------:|
|      List |   10 |    41.856 ns | 0.0928 ns | 0.0868 ns |    41.818 ns |    41.765 ns |    42.052 ns |           - |           - |           - |                   - |
| HashedSet |   10 |    47.866 ns | 0.1381 ns | 0.1224 ns |    47.898 ns |    47.680 ns |    48.040 ns |           - |           - |           - |                   - |
|     Array |   10 |     5.474 ns | 0.0073 ns | 0.0065 ns |     5.471 ns |     5.467 ns |     5.487 ns |           - |           - |           - |                   - |
|      List |  100 |   324.574 ns | 0.3313 ns | 0.3099 ns |   324.611 ns |   323.958 ns |   325.059 ns |           - |           - |           - |                   - |
| HashedSet |  100 |   393.552 ns | 0.9280 ns | 0.8681 ns |   393.646 ns |   392.020 ns |   394.862 ns |           - |           - |           - |                   - |
|     Array |  100 |    56.057 ns | 0.0271 ns | 0.0241 ns |    56.063 ns |    56.010 ns |    56.100 ns |           - |           - |           - |                   - |
|      List | 1000 | 3,140.407 ns | 3.0717 ns | 2.5650 ns | 3,139.969 ns | 3,136.878 ns | 3,146.345 ns |           - |           - |           - |                   - |
| HashedSet | 1000 | 3,796.385 ns | 3.1853 ns | 2.9796 ns | 3,796.876 ns | 3,791.375 ns | 3,801.460 ns |           - |           - |           - |                   - |
|     Array | 1000 |   626.475 ns | 4.2851 ns | 4.0083 ns |   626.859 ns |   620.029 ns |   632.376 ns |           - |           - |           - |                   - |


## Core
|    Method |    N |         Mean |      Error |     StdDev |       Median |          Min |          Max |  Gen 0 | Gen 1 | Gen 2 | Allocated |
|---------- |----- |-------------:|-----------:|-----------:|-------------:|-------------:|-------------:|-------:|------:|------:|----------:|
|      List |   10 |    41.543 ns |  0.0657 ns |  0.0615 ns |    41.544 ns |    41.442 ns |    41.667 ns |      - |     - |     - |         - |
| HashedSet |   10 |    97.032 ns |  0.1038 ns |  0.0971 ns |    97.031 ns |    96.832 ns |    97.191 ns | 0.0085 |     - |     - |      40 B |
|     Array |   10 |     5.640 ns |  0.0076 ns |  0.0071 ns |     5.639 ns |     5.626 ns |     5.653 ns |      - |     - |     - |         - |
|      List |  100 |   333.834 ns |  0.3357 ns |  0.2976 ns |   333.832 ns |   333.312 ns |   334.234 ns |      - |     - |     - |         - |
| HashedSet |  100 |   778.215 ns |  0.6847 ns |  0.6404 ns |   778.139 ns |   777.314 ns |   779.151 ns | 0.0076 |     - |     - |      40 B |
|     Array |  100 |    56.075 ns |  0.0684 ns |  0.0640 ns |    56.086 ns |    55.997 ns |    56.240 ns |      - |     - |     - |         - |
|      List | 1000 | 3,211.679 ns |  1.9797 ns |  1.7550 ns | 3,211.679 ns | 3,208.768 ns | 3,214.904 ns |      - |     - |     - |         - |
| HashedSet | 1000 | 7,610.392 ns |  5.9234 ns |  5.2510 ns | 7,610.405 ns | 7,603.322 ns | 7,617.772 ns | 0.0076 |     - |     - |      40 B |
|     Array | 1000 |   615.456 ns | 12.0895 ns | 16.9478 ns |   622.544 ns |   583.950 ns |   636.772 ns |      - |     - |     - |         - |
